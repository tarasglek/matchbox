# dnsmasq.conf

no-daemon
dhcp-range=172.17.0.50,172.17.0.99
# don't offer dhcp to self
dhcp-ignore=tag:iPXE_bootstrap
dhcp-option=3,172.17.0.1
domain=example.com

enable-tftp
tftp-root=/var/lib/tftpboot

dhcp-boot=tag:!iPXE_controller,http://bootstrap.example.com:8080/boot.ipxe
dhcp-boot=tag:iPXE_controller,http://bootstrap.example.com:8080/ipxe?k8s=controller

log-queries
log-dhcp

dhcp-host=52:54:00:a1:9c:aa,172.17.0.21,1h,set:iPXE_controller

dhcp-host=52:54:00:b2:2f:86,172.17.0.22,1h
dhcp-host=52:54:00:c3:61:77,172.17.0.23,1h

address=/node1.example.com/172.17.0.21
address=/node2.example.com/172.17.0.22
address=/node3.example.com/172.17.0.23
address=/cluster.example.com/172.17.0.21
address=/registry.local/127.0.0.1

#leave newline below:
